<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Se√±ales BNB - Compra/Venta con Precios Reales</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #f0b90b;
            --secondary: #1e2026;
            --accent: #2b3139;
            --text: #eaecef;
            --success: #0ecb81;
            --danger: #f6465d;
            --warning: #f0b90b;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--secondary);
            color: var(--text);
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 20px;
        }
        
        h1 {
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: var(--text);
            opacity: 0.8;
        }
        
        .card {
            background-color: var(--accent);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .card h2 {
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .price-display {
            font-size: 2.5rem;
            font-weight: bold;
            text-align: center;
            margin: 15px 0;
        }
        
        .price-up {
            color: var(--success);
        }
        
        .price-down {
            color: var(--danger);
        }
        
        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }
        
        .stat-item {
            text-align: center;
            padding: 10px;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
        }
        
        .stat-value {
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .signal-box {
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-weight: bold;
            border: 3px solid;
            animation: pulse 2s infinite;
        }
        
        .buy-signal {
            background-color: rgba(14, 203, 129, 0.2);
            border-color: var(--success);
            color: var(--success);
        }
        
        .sell-signal {
            background-color: rgba(246, 70, 93, 0.2);
            border-color: var(--danger);
            color: var(--danger);
        }
        
        .hold-signal {
            background-color: rgba(240, 185, 11, 0.2);
            border-color: var(--warning);
            color: var(--warning);
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        
        .signal-message {
            font-size: 1.4rem;
            margin-bottom: 10px;
        }
        
        .signal-details {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 10px;
        }
        
        .signal-price {
            font-size: 1.2rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        button {
            padding: 15px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex: 1;
            font-size: 1.1rem;
        }
        
        .btn-buy {
            background-color: var(--success);
            color: white;
        }
        
        .btn-sell {
            background-color: var(--danger);
            color: white;
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        
        button:hover:not(:disabled) {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .target-info {
            background-color: rgba(240, 185, 11, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }
        
        .target-info h3 {
            margin-bottom: 15px;
            color: var(--primary);
            font-size: 1.3rem;
        }
        
        .profit-display {
            font-size: 2rem;
            font-weight: bold;
            margin: 15px 0;
        }
        
        .profit-positive {
            color: var(--success);
        }
        
        .profit-negative {
            color: var(--danger);
        }
        
        .progress-container {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            height: 20px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: var(--success);
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        .alerts-container {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 15px;
        }
        
        .alert-item {
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-left: 5px solid;
        }
        
        .alert-buy {
            background-color: rgba(14, 203, 129, 0.1);
            border-left-color: var(--success);
        }
        
        .alert-sell {
            background-color: rgba(246, 70, 93, 0.1);
            border-left-color: var(--danger);
        }
        
        .alert-hold {
            background-color: rgba(240, 185, 11, 0.1);
            border-left-color: var(--warning);
        }
        
        .alert-time {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-top: 5px;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-online {
            background-color: var(--success);
            animation: blink 2s infinite;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }
        
        .status-offline {
            background-color: var(--danger);
        }
        
        .disclaimer {
            background-color: rgba(240, 185, 11, 0.1);
            border: 1px solid var(--warning);
            border-radius: 5px;
            padding: 15px;
            margin-top: 20px;
            font-size: 0.9rem;
            text-align: center;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--accent);
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }
        
        .loading {
            opacity: 0.7;
            font-style: italic;
        }
        
        .price-change {
            font-size: 1.1rem;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-bullhorn"></i> Se√±ales BNB - COMPRA/VENTA</h1>
            <p class="subtitle">Alertas claras con precios reales - Objetivo: $30 de ganancia con $150</p>
            <p><span class="status-indicator" id="status-indicator"></span> <span id="connection-status">Conectando a datos reales...</span></p>
        </header>
        
        <div class="card">
            <h2><i class="fas fa-chart-line"></i> Precio Real BNB/USDT</h2>
            <div class="price-display" id="current-price">Cargando precio real...</div>
            <div class="stats">
                <div class="stat-item">
                    <div>Cambio 24h</div>
                    <div class="stat-value" id="change-24h">-</div>
                </div>
                <div class="stat-item">
                    <div>M√°ximo 24h</div>
                    <div class="stat-value" id="high-24h">-</div>
                </div>
                <div class="stat-item">
                    <div>M√≠nimo 24h</div>
                    <div class="stat-value" id="low-24h">-</div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h2><i class="fas fa-bell"></i> SE√ëAL ACTUAL</h2>
            <div class="signal-box" id="signal-box">
                <div class="signal-message">ANALIZANDO MERCADO...</div>
                <div class="signal-details" id="signal-details">Buscando mejores oportunidades de trading</div>
                <div class="signal-price" id="signal-price">Precio actual: $---</div>
            </div>
            
            <div class="target-info">
                <h3><i class="fas fa-bullseye"></i> OBJETIVO: $30 DE GANANCIA</h3>
                <div class="profit-display" id="current-profit">$0.00</div>
                <div class="progress-container">
                    <div class="progress-bar" id="progress-bar" style="width: 0%"></div>
                </div>
                <div id="profit-status">Esperando operaci√≥n...</div>
            </div>
            
            <div class="controls">
                <button class="btn-buy" id="buy-btn" disabled>
                    <i class="fas fa-shopping-cart"></i> EJECUTAR COMPRA
                </button>
                <button class="btn-sell" id="sell-btn" disabled>
                    <i class="fas fa-dollar-sign"></i> EJECUTAR VENTA
                </button>
            </div>
        </div>
        
        <div class="card">
            <h2><i class="fas fa-history"></i> HISTORIAL DE SE√ëALES</h2>
            <div class="alerts-container" id="alerts-container">
                <div class="alert-item alert-hold">
                    <i class="fas fa-info-circle"></i>
                    <div>
                        <strong>INICIALIZANDO SISTEMA</strong>
                        <div>Cargando datos reales de Binance Coin</div>
                        <div class="alert-time" id="last-update">-</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="disclaimer">
            <strong>‚ö†Ô∏è ATENCI√ìN:</strong> Esta es una herramienta educativa. Las criptomonedas son vol√°tiles. 
            Nunca inviertas m√°s de lo que est√©s dispuesto a perder. Precios de Binance via API p√∫blica.
        </div>
        
        <footer>
            <p>Datos en tiempo real de Binance | Se√±ales basadas en an√°lisis t√©cnico simple</p>
        </footer>
    </div>

    <script>
        // Variables de trading
        let currentPrice = 0;
        let bnbBalance = 0;
        let usdBalance = 150;
        let initialInvestment = 150;
        let lastBuyPrice = 0;
        let priceHistory = [];
        let lastSignal = null;
        
        // Elementos DOM
        const currentPriceElement = document.getElementById('current-price');
        const change24hElement = document.getElementById('change-24h');
        const high24hElement = document.getElementById('high-24h');
        const low24hElement = document.getElementById('low-24h');
        const signalBox = document.getElementById('signal-box');
        const signalDetails = document.getElementById('signal-details');
        const signalPrice = document.getElementById('signal-price');
        const currentProfitElement = document.getElementById('current-profit');
        const progressBar = document.getElementById('progress-bar');
        const profitStatusElement = document.getElementById('profit-status');
        const buyButton = document.getElementById('buy-btn');
        const sellButton = document.getElementById('sell-btn');
        const alertsContainer = document.getElementById('alerts-container');
        const statusIndicator = document.getElementById('status-indicator');
        const connectionStatus = document.getElementById('connection-status');
        const lastUpdateElement = document.getElementById('last-update');

        // Inicializar app
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setInterval(fetchRealPrice, 8000);
        });

        async function initializeApp() {
            updateStatus('Conectando a Binance...', 'offline');
            await fetchRealPrice();
            updateStatus('CONECTADO - Datos reales', 'online');
            
            buyButton.disabled = false;
            sellButton.disabled = false;
            
            buyButton.addEventListener('click', executeBuy);
            sellButton.addEventListener('click', executeSell);
            
            generateSignal();
        }

        async function fetchRealPrice() {
            try {
                // Usar API de Binance para precio real
                const response = await fetch('https://api.binance.com/api/v3/ticker/24hr?symbol=BNBUSDT');
                const data = await response.json();
                
                if (data && data.lastPrice) {
                    currentPrice = parseFloat(data.lastPrice);
                    const priceChange = parseFloat(data.priceChangePercent);
                    const highPrice = parseFloat(data.highPrice);
                    const lowPrice = parseFloat(data.lowPrice);
                    
                    updateUI({
                        price: currentPrice,
                        change: priceChange,
                        high: highPrice,
                        low: lowPrice
                    });
                    
                    generateSignal();
                    updateStatus('SE√ëALES ACTIVAS', 'online');
                    lastUpdateElement.textContent = new Date().toLocaleTimeString();
                }
            } catch (error) {
                console.error('Error:', error);
                updateStatus('Error - Usando datos de respaldo', 'offline');
                useFallbackData();
            }
        }

        function useFallbackData() {
            // Datos realistas basados en precio actual de BNB (~$580)
            const changePercent = (Math.random() - 0.5) * 4;
            currentPrice = currentPrice > 0 ? currentPrice * (1 + changePercent / 100) : 580 + (Math.random() - 0.5) * 20;
            
            const fakeData = {
                price: currentPrice,
                change: (Math.random() - 0.5) * 8,
                high: currentPrice * (1 + Math.random() * 0.04),
                low: currentPrice * (1 - Math.random() * 0.04)
            };
            
            updateUI(fakeData);
            generateSignal();
            lastUpdateElement.textContent = new Date().toLocaleTimeString() + ' (simulado)';
        }

        function updateUI(data) {
            // Precio actual
            currentPriceElement.textContent = `$${data.price.toFixed(2)}`;
            currentPriceElement.className = 'price-display';
            
            // Cambio 24h
            change24hElement.textContent = `${data.change.toFixed(2)}%`;
            change24hElement.className = data.change >= 0 ? 'stat-value price-up' : 'stat-value price-down';
            
            // High/Low
            high24hElement.textContent = `$${data.high.toFixed(2)}`;
            low24hElement.textContent = `$${data.low.toFixed(2)}`;
            
            // Actualizar ganancias
            updateProfitDisplay();
        }

        function generateSignal() {
            const signal = calculateSignal();
            
            // Evitar se√±ales duplicadas
            if (lastSignal === signal.type) return;
            lastSignal = signal.type;
            
            // Aplicar estilos seg√∫n se√±al
            signalBox.className = `signal-box ${signal.type}-signal`;
            signalBox.innerHTML = `
                <div class="signal-message">${signal.message}</div>
                <div class="signal-details">${signal.details}</div>
                <div class="signal-price">${signal.priceInfo}</div>
            `;
            
            addAlertToHistory(signal);
        }

        function calculateSignal() {
            if (bnbBalance === 0) {
                // ESTRATEGIA DE COMPRA
                const change24h = parseFloat(change24hElement.textContent) || 0;
                
                // Se√±al FUERTE de COMPRA si:
                // 1. Precio baj√≥ m√°s del 3% en 24h
                // 2. Est√° cerca del m√≠nimo de 24h
                const currentLow = parseFloat(low24hElement.textContent.replace('$', '')) || 0;
                const distanceToLow = ((currentPrice - currentLow) / currentLow) * 100;
                
                if (change24h < -3 && distanceToLow < 2) {
                    return {
                        type: 'buy',
                        message: 'üö® COMPRA INMEDIATA üö®',
                        details: 'Precio en zona de soporte fuerte - Bajada del ' + Math.abs(change24h).toFixed(1) + '% en 24h',
                        priceInfo: `Precio actual: $${currentPrice.toFixed(2)} | Objetivo: $${(currentPrice * 1.06).toFixed(2)} (+6%)`
                    };
                }
                
                // Se√±al de COMPRA si precio baj√≥
                if (change24h < -1.5) {
                    return {
                        type: 'buy',
                        message: '‚úÖ SE√ëAL DE COMPRA',
                        details: 'Precio en correcci√≥n - Oportunidad de entrada',
                        priceInfo: `Precio actual: $${currentPrice.toFixed(2)} | Objetivo: $${(currentPrice * 1.05).toFixed(2)} (+5%)`
                    };
                }
                
                // Mantener si no hay se√±ales claras
                return {
                    type: 'hold',
                    message: '‚è≥ MANTENER EFECTIVO',
                    details: 'Esperando mejor oportunidad de compra',
                    priceInfo: `Precio actual: $${currentPrice.toFixed(2)} | Esperar bajo $${(currentPrice * 0.98).toFixed(2)}`
                };
                
            } else {
                // ESTRATEGIA DE VENTA
                const profit = (bnbBalance * currentPrice) - initialInvestment;
                const profitPercentage = (profit / initialInvestment) * 100;
                const buyPrice = lastBuyPrice;
                const priceChangeSinceBuy = ((currentPrice - buyPrice) / buyPrice) * 100;
                
                // üéØ OBJETIVO CUMPLIDO - VENDER
                if (profit >= 30) {
                    return {
                        type: 'sell',
                        message: 'üéØ VENDER AHORA - OBJETIVO CUMPLIDO',
                        details: `¬°GANANCIA DE $${profit.toFixed(2)} ALCANZADA!`,
                        priceInfo: `Compra: $${buyPrice.toFixed(2)} | Actual: $${currentPrice.toFixed(2)} | Ganancia: ${profitPercentage.toFixed(1)}%`
                    };
                }
                
                // üìà BUENA GANANCIA - CONSIDERAR VENTA
                if (profit >= 20) {
                    return {
                        type: 'sell',
                        message: 'üí° CONSIDERAR VENTA',
                        details: `Ganancia actual: $${profit.toFixed(2)} - Cerca del objetivo de $30`,
                        priceInfo: `Faltan $${(30 - profit).toFixed(2)} para el objetivo | Ganancia: ${profitPercentage.toFixed(1)}%`
                    };
                }
                
                // üîª CORTAR P√âRDIDAS si bajada fuerte
                if (profit <= -20) {
                    return {
                        type: 'sell',
                        message: '‚ö†Ô∏è CORTAR P√âRDIDAS',
                        details: `P√©rdida significativa: $${Math.abs(profit).toFixed(2)}`,
                        priceInfo: `Compra: $${buyPrice.toFixed(2)} | Actual: $${currentPrice.toFixed(2)} | P√©rdida: ${Math.abs(profitPercentage).toFixed(1)}%`
                    };
                }
                
                // üìä MANTENER POSICI√ìN
                return {
                    type: 'hold',
                    message: 'üìà MANTENER BNB',
                    details: profit >= 0 ? 
                        `En ganancias: $${profit.toFixed(2)} | Objetivo: $30` :
                        `En recuperaci√≥n: $${Math.abs(profit).toFixed(2)} de p√©rdida`,
                    priceInfo: `Compra: $${buyPrice.toFixed(2)} | Actual: $${currentPrice.toFixed(2)} | Cambio: ${priceChangeSinceBuy.toFixed(1)}%`
                };
            }
        }

        function updateProfitDisplay() {
            if (bnbBalance > 0 && lastBuyPrice > 0) {
                const currentValue = bnbBalance * currentPrice;
                const profit = currentValue - initialInvestment;
                const progress = Math.min(100, (profit / 30) * 100);
                
                currentProfitElement.textContent = `$${profit.toFixed(2)}`;
                currentProfitElement.className = profit >= 0 ? 'profit-display profit-positive' : 'profit-display profit-negative';
                
                progressBar.style.width = `${progress}%`;
                
                if (profit >= 30) {
                    profitStatusElement.textContent = 'üéØ ¬°OBJETIVO ALCANZADO! VENDER PARA ASEGURAR GANANCIAS';
                    profitStatusElement.style.color = 'var(--success)';
                } else if (profit >= 20) {
                    profitStatusElement.textContent = '‚úÖ Buen progreso - Cerca del objetivo de $30';
                    profitStatusElement.style.color = 'var(--success)';
                } else if (profit >= 0) {
                    profitStatusElement.textContent = `üìà En ganancias - Faltan $${(30 - profit).toFixed(2)} para el objetivo`;
                    profitStatusElement.style.color = 'var(--success)';
                } else {
                    profitStatusElement.textContent = `‚è≥ En recuperaci√≥n - $${Math.abs(profit).toFixed(2)} de p√©rdida`;
                    profitStatusElement.style.color = 'var(--danger)';
                }
            } else {
                currentProfitElement.textContent = '$0.00';
                currentProfitElement.className = 'profit-display';
                progressBar.style.width = '0%';
                profitStatusElement.textContent = 'Esperando operaci√≥n de compra';
                profitStatusElement.style.color = 'var(--text)';
            }
        }

        function addAlertToHistory(signal) {
            const alertItem = document.createElement('div');
            alertItem.className = `alert-item alert-${signal.type}`;
            
            alertItem.innerHTML = `
                <i class="fas ${signal.type === 'buy' ? 'fa-arrow-up' : signal.type === 'sell' ? 'fa-arrow-down' : 'fa-pause'}"></i>
                <div>
                    <strong>${signal.type === 'buy' ? 'COMPRA' : signal.type === 'sell' ? 'VENTA' : 'MANTENER'}</strong>
                    <div>${signal.details}</div>
                    <div>${signal.priceInfo}</div>
                    <div class="alert-time">${new Date().toLocaleTimeString()}</div>
                </div>
            `;
            
            alertsContainer.prepend(alertItem);
            
            if (alertsContainer.children.length > 6) {
                alertsContainer.removeChild(alertsContainer.lastChild);
            }
        }

        function updateStatus(message, status) {
            connectionStatus.textContent = message;
            statusIndicator.className = `status-indicator status-${status}`;
        }

        function executeBuy() {
            if (usdBalance > 0) {
                const bnbToBuy = usdBalance / currentPrice;
                bnbBalance = bnbToBuy;
                lastBuyPrice = currentPrice;
                usdBalance = 0;
                
                alert(`‚úÖ COMPRA EJECUTADA\n${bnbToBuy.toFixed(6)} BNB a $${currentPrice.toFixed(2)}\nInversi√≥n: $150`);
                
                updateProfitDisplay();
                generateSignal();
            } else {
                alert('No tienes saldo disponible');
            }
        }

        function executeSell() {
            if (bnbBalance > 0) {
                const usdReceived = bnbBalance * currentPrice;
                const profit = usdReceived - initialInvestment;
                
                let message;
                if (profit >= 0) {
                    message = `‚úÖ VENTA EJECUTADA\n${bnbBalance.toFixed(6)} BNB a $${currentPrice.toFixed(2)}\nGANANCIA: $${profit.toFixed(2)}`;
                } else {
                    message = `üîª VENTA EJECUTADA\n${bnbBalance.toFixed(6)} BNB a $${currentPrice.toFixed(2)}\nP√âRDIDA: $${Math.abs(profit).toFixed(2)}`;
                }
                
                alert(message);
                
                // Resetear para nueva operaci√≥n
                bnbBalance = 0;
                lastBuyPrice = 0;
                initialInvestment = 150;
                usdBalance = usdReceived;
                
                updateProfitDisplay();
                generateSignal();
            } else {
                alert('No tienes BNB para vender');
            }
        }
    </script>
</body>
</html>
